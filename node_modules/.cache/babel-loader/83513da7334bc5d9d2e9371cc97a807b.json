{"ast":null,"code":"import _defineProperty from\"D:\\\\work\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\work\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\work\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from'react';import AlertContext from'../../context/alert/alertContext';import AuthContext from'../../context/auth/authContext';var Login=function Login(props){var alertContext=useContext(AlertContext);var authContext=useContext(AuthContext);var login=authContext.login,error=authContext.error,clearError=authContext.clearError,isAuthenticated=authContext.isAuthenticated;var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];// init state var \nvar email=user.email,password=user.password;// on change \nvar onchange=function onchange(e){setUser(_objectSpread({},user,_defineProperty({},e.target.name,e.target.value)));};// check isAut \nuseEffect(function(){if(isAuthenticated)props.history.push(\"/\");if(error===\"invalid user\")alertContext.setAlert(\"invalid user\");// eslint disable next line \nclearError();},[error,isAuthenticated,props.history]);// on submit \nvar onSubmit=function onSubmit(){if(email===\"\"||password===\"\"){alertContext.setAlert(\"invalid user name\");}else{login({email:email,password:password});}};return React.createElement(\"div\",{className:\"form-container\"},React.createElement(\"h1\",null,\"Account Login\"),React.createElement(\"div\",{className:\"form_group\"},React.createElement(\"label\",null,\"Email\"),React.createElement(\"input\",{type:\"email\",name:\"email\",value:email,onChange:onchange,className:\"input\"})),React.createElement(\"div\",{className:\"form_group\"},React.createElement(\"label\",null,\"Password\"),React.createElement(\"input\",{type:\"password\",name:\"password\",value:password,onChange:onchange,className:\"input\"})),React.createElement(\"div\",{className:\"form_group\"},React.createElement(\"button\",{className:\"btn edit_btn\",onClick:onSubmit},\"Login\")));};export default Login;","map":{"version":3,"sources":["D:/work/client/src/component/auth/Login.js"],"names":["React","useState","useContext","useEffect","AlertContext","AuthContext","Login","props","alertContext","authContext","login","error","clearError","isAuthenticated","email","password","user","setUser","onchange","e","target","name","value","history","push","setAlert","onSubmit"],"mappings":"mTAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,YAAP,KAAyB,kCAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,gCAAxB,CAGA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,CAErB,GAAMC,CAAAA,YAAY,CAAGN,UAAU,CAACE,YAAD,CAA/B,CACA,GAAMK,CAAAA,WAAW,CAAGP,UAAU,CAACG,WAAD,CAA9B,CAHqB,GAIbK,CAAAA,KAJa,CAIiCD,WAJjC,CAIbC,KAJa,CAINC,KAJM,CAIiCF,WAJjC,CAINE,KAJM,CAICC,UAJD,CAIiCH,WAJjC,CAICG,UAJD,CAIaC,eAJb,CAIiCJ,WAJjC,CAIaI,eAJb,eAKGZ,QAAQ,CAAC,CAC7Ba,KAAK,CAAE,EADsB,CAE7BC,QAAQ,CAAE,EAFmB,CAAD,CALX,wCAKdC,IALc,eAKRC,OALQ,eAUrB;AAVqB,GAWbH,CAAAA,KAXa,CAWOE,IAXP,CAWbF,KAXa,CAWNC,QAXM,CAWOC,IAXP,CAWND,QAXM,CAarB;AACA,GAAMG,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,CAAD,CAAO,CACpBF,OAAO,kBAAMD,IAAN,oBAAaG,CAAC,CAACC,MAAF,CAASC,IAAtB,CAA6BF,CAAC,CAACC,MAAF,CAASE,KAAtC,GAAP,CACH,CAFD,CAIA;AACAnB,SAAS,CAAC,UAAM,CACZ,GAAIU,eAAJ,CAAqBN,KAAK,CAACgB,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACrB,GAAIb,KAAK,GAAK,cAAd,CAA+BH,YAAY,CAACiB,QAAb,CAAsB,cAAtB,EAE/B;AACAb,UAAU,GACb,CANQ,CAMN,CAACD,KAAD,CAAQE,eAAR,CAAyBN,KAAK,CAACgB,OAA/B,CANM,CAAT,CAQA;AACA,GAAMG,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnB,GAAIZ,KAAK,GAAK,EAAV,EAAgBC,QAAQ,GAAK,EAAjC,CAAqC,CACjCP,YAAY,CAACiB,QAAb,CAAsB,mBAAtB,EACH,CAFD,IAGK,CACDf,KAAK,CAAC,CAAEI,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAD,CAAL,CACH,CACJ,CAPD,CAUA,MACI,4BAAK,SAAS,CAAC,gBAAf,EACI,8CADJ,CAEI,2BAAK,SAAS,CAAC,YAAf,EACI,yCADJ,CAEI,6BAAO,IAAI,CAAC,OAAZ,CAAoB,IAAI,CAAC,OAAzB,CAAiC,KAAK,CAAED,KAAxC,CAA+C,QAAQ,CAAEI,QAAzD,CAAmE,SAAS,CAAC,OAA7E,EAFJ,CAFJ,CAMI,2BAAK,SAAS,CAAC,YAAf,EACI,4CADJ,CAEI,6BAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,UAA5B,CAAuC,KAAK,CAAEH,QAA9C,CAAwD,QAAQ,CAAEG,QAAlE,CAA4E,SAAS,CAAC,OAAtF,EAFJ,CANJ,CAUI,2BAAK,SAAS,CAAC,YAAf,EACI,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAEQ,QAA1C,UADJ,CAVJ,CADJ,CAgBH,CAtDD,CAwDA,cAAepB,CAAAA,KAAf","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport AlertContext from '../../context/alert/alertContext';\r\nimport AuthContext from '../../context/auth/authContext';\r\n\r\n\r\nconst Login = (props) => {\r\n\r\n    const alertContext = useContext(AlertContext)\r\n    const authContext = useContext(AuthContext)\r\n    const { login, error, clearError, isAuthenticated } = authContext;\r\n    const [user, setUser] = useState({\r\n        email: \"\",\r\n        password: \"\",\r\n    })\r\n\r\n    // init state var \r\n    const { email, password } = user;\r\n\r\n    // on change \r\n    const onchange = (e) => {\r\n        setUser({ ...user, [e.target.name]: e.target.value })\r\n    }\r\n\r\n    // check isAut \r\n    useEffect(() => {\r\n        if (isAuthenticated) props.history.push(\"/\")\r\n        if (error === \"invalid user\")  alertContext.setAlert(\"invalid user\");\r\n\r\n        // eslint disable next line \r\n        clearError()\r\n    }, [error, isAuthenticated, props.history])\r\n\r\n    // on submit \r\n    const onSubmit = () => {\r\n        if (email === \"\" || password === \"\") {\r\n            alertContext.setAlert(\"invalid user name\")\r\n        }\r\n        else {\r\n            login({ email, password })\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"form-container\">\r\n            <h1>Account Login</h1>\r\n            <div className=\"form_group\">\r\n                <label>Email</label>\r\n                <input type=\"email\" name=\"email\" value={email} onChange={onchange} className=\"input\" />\r\n            </div>\r\n            <div className=\"form_group\">\r\n                <label>Password</label>\r\n                <input type=\"password\" name=\"password\" value={password} onChange={onchange} className=\"input\" />\r\n            </div>\r\n            <div className=\"form_group\">\r\n                <button className=\"btn edit_btn\" onClick={onSubmit}>Login</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}